<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iyarà Side Restaurant</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            green: '#004d40',
                            gold: '#d4af37',
                            cream: '#f5f5dc',
                            dark: '#1a1a1a',
                        }
                    },
                    fontFamily: {
                        serif: ['Playfair Display', 'serif'],
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        /* Mobile-First Modal System */
        .modal-overlay {
            position: fixed;
            inset: 0;
            display: grid;
            place-items: center;
            padding: 16px;
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(8px);
            z-index: 9999;
            -webkit-overflow-scrolling: touch;
        }

        /* Modal container with 3-part flex layout */
        .modal-container {
            width: min(560px, 100%);
            max-height: min(85vh, 720px);
            background: #fff;
            border-radius: 24px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        /* Support for newer mobile browsers with dynamic viewport */
        @supports (height: 100dvh) {
            .modal-container {
                max-height: min(85dvh, 720px);
            }
        }

        /* Header stays visible (sticky inside modal) */
        .modal-header {
            flex: 0 0 auto;
            padding: 20px 24px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
            background: #004d40;
            color: white;
            position: relative;
        }

        .modal-close-btn {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .modal-close-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Body scrolls independently */
        .modal-body {
            flex: 1 1 auto;
            padding: 20px 24px;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
        }

        /* Footer stays visible (sticky inside modal) */
        .modal-footer {
            flex: 0 0 auto;
            padding: 16px 24px;
            border-top: 1px solid rgba(0, 0, 0, 0.08);
            background: #fff;
            position: sticky;
            bottom: 0;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        /* Mobile-first button styles with high contrast */
        .modal-btn {
            min-height: 48px;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            -webkit-tap-highlight-color: transparent;
        }

        .modal-btn-primary {
            background: #d4af37;
            color: #004d40;
            box-shadow: 0 2px 8px rgba(212, 175, 55, 0.3);
        }

        .modal-btn-primary:hover {
            background: #1a1a1a;
            color: white;
            box-shadow: 0 4px 12px rgba(26, 26, 26, 0.4);
        }

        .modal-btn-secondary {
            background: #f3f4f6;
            color: #374151;
            border: 2px solid #e5e7eb;
        }

        .modal-btn-secondary:hover {
            background: #e5e7eb;
            border-color: #d1d5db;
        }

        .modal-btn-whatsapp {
            background: #25D366;
            color: white;
            box-shadow: 0 2px 8px rgba(37, 211, 102, 0.3);
        }

        .modal-btn-whatsapp:hover {
            background: #20BA5A;
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4);
        }

        /* Toast notification - high z-index, modal-aware */
        #copy-toast {
            position: fixed;
            top: 24px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10000;
            background: #004d40;
            color: white;
            padding: 14px 24px;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            font-weight: 700;
            font-size: 15px;
            transition: opacity 0.3s ease-in-out;
        }

        #copy-toast.show {
            opacity: 1 !important;
        }

        /* Prevent body scroll when modal is open */
        body.modal-open {
            overflow: hidden;
            position: fixed;
            width: 100%;
        }

        /* Tablet and up */
        @media (min-width: 640px) {
            .modal-footer {
                flex-direction: row;
                gap: 12px;
            }

            .modal-btn {
                flex: 1;
            }
        }
    </style>
</head>

<body class="font-sans antialiased text-gray-800 bg-white selection:bg-brand-gold selection:text-brand-green">

    <!-- Table Context Banner (Hidden by default) -->
    <div id="table-banner"
        class="hidden sticky top-0 z-50 bg-brand-gold text-brand-dark px-4 py-2 text-center shadow-md">
        <span class="font-black tracking-widest uppercase text-sm" id="table-banner-text"></span>
    </div>

    <!-- Hero Section -->
    <section class="relative min-h-[80vh] w-full flex items-center justify-center overflow-hidden bg-brand-dark">
        <div class="absolute inset-0 bg-cover bg-center opacity-60"
            style="background-image: url('https://images.unsplash.com/photo-1559339352-11d035aa65de?auto=format&fit=crop&q=80&w=1920')">
        </div>
        <div class="absolute inset-0 bg-gradient-to-b from-brand-dark/80 via-brand-dark/40 to-brand-dark"></div>

        <div class="relative z-10 text-center px-4 max-w-4xl mx-auto">
            <div
                class="inline-flex items-center gap-2 bg-brand-gold text-brand-dark px-5 py-2 rounded-full mb-8 mx-auto">
                <i data-lucide="award" class="w-4 h-4"></i>
                <span class="text-xs font-black tracking-[0.25em] uppercase">Voted #1 Dining Experience</span>
            </div>

            <h1 class="text-5xl md:text-7xl font-serif text-white mb-6 leading-tight font-black tracking-tighter">
                WORLD-CLASS <br />
                <span class="text-brand-gold italic">FLAVOR.</span>
            </h1>

            <p class="text-brand-cream text-lg mb-10 max-w-xl mx-auto">Experience the finest culinary heritage in a
                luxury setting. Order directly from your phone.</p>

            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <a href="#digital-menu"
                    class="bg-brand-gold text-brand-green px-10 py-5 rounded-2xl font-black text-xl hover:bg-white transition-all shadow-xl flex items-center justify-center gap-2">
                    <i data-lucide="zap" class="w-6 h-6"></i> ORDER NOW
                </a>
                <button onclick="callWaiter()"
                    class="bg-white/10 border-2 border-white/40 text-white px-10 py-5 rounded-2xl font-black text-xl hover:bg-white/20 transition-all flex items-center justify-center gap-2">
                    <i data-lucide="bell" class="w-6 h-6"></i> CALL WAITER
                </button>
            </div>
        </div>
    </section>

    <!-- Digital Menu Section -->
    <section id="digital-menu" class="py-16 bg-gray-50 relative">
        <div class="max-w-7xl mx-auto px-4">

            <!-- Controls (Categories, Search, Cart Button) -->
            <div
                class="bg-white p-6 rounded-[2rem] shadow-xl border border-gray-100 flex flex-col lg:flex-row gap-6 items-center justify-between sticky top-4 z-40 mb-12">
                <!-- Categories -->
                <div id="category-list" class="flex overflow-x-auto w-full lg:w-auto hide-scrollbar gap-2 pb-2 lg:pb-0">
                    <!-- Injected via JS -->
                </div>

                <!-- Search -->
                <div class="relative w-full lg:w-80">
                    <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"></i>
                    <input type="text" id="search-input" placeholder="Search menu..."
                        class="w-full bg-gray-50 border border-gray-200 pl-12 pr-4 py-3 rounded-xl focus:outline-none focus:border-brand-gold transition-all">
                </div>

                <!-- Cart Toggle -->
                <button onclick="toggleCart(true)"
                    class="flex items-center text-white font-bold text-sm bg-brand-green px-6 py-3 rounded-xl hover:bg-brand-gold hover:text-brand-green transition-all w-full lg:w-auto justify-center shadow-lg gap-2">
                    <i data-lucide="shopping-bag" class="w-5 h-5"></i>
                    <span id="cart-count-btn">Cart (0)</span>
                    <span id="cart-total-btn"
                        class="bg-white text-brand-green px-2 py-0.5 rounded-full text-xs">₦0</span>
                </button>
            </div>

            <!-- Menu Grid -->
            <div id="menu-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 min-h-[50vh]">
                <!-- Dishes injected via JS -->
            </div>

        </div>
    </section>

    <!-- Cart Drawer -->
    <div id="cart-drawer" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity" onclick="toggleCart(false)"></div>
        <div class="absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-2xl transform transition-transform duration-300 translate-x-full"
            id="cart-panel">
            <div class="flex flex-col h-full">
                <div class="p-6 border-b flex justify-between items-center bg-brand-green text-white">
                    <div>
                        <h2 class="text-2xl font-serif">Your Order</h2>
                        <p id="cart-table-display"
                            class="text-brand-gold text-xs font-bold uppercase tracking-widest mt-1 hidden"></p>
                    </div>
                    <button onclick="toggleCart(false)"><i data-lucide="x" class="w-8 h-8"></i></button>
                </div>

                <div id="cart-items" class="flex-grow overflow-y-auto p-6 space-y-6">
                    <!-- Cart Items Injected -->
                </div>

                <div id="cart-footer" class="p-8 bg-brand-cream border-t border-brand-gold/10 space-y-4">
                    <div class="flex justify-between items-center text-brand-green font-bold text-xl mb-4">
                        <span>Total Due</span>
                        <span id="cart-total-display">₦0</span>
                    </div>
                    <button onclick="openCheckout()"
                        class="w-full bg-brand-green text-white py-4 rounded-2xl font-black text-lg flex items-center justify-center gap-3 hover:bg-brand-dark transition-all shadow-xl">
                        PROCEED TO CHECKOUT <i data-lucide="chevron-right" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkout-modal"
        class="fixed inset-0 z-[110] hidden flex items-center justify-center bg-black/80 backdrop-blur-sm p-4">
        <div class="bg-white rounded-[2rem] max-w-md w-full overflow-hidden shadow-2xl animate-fade-in relative">
            <div class="bg-brand-green p-6 flex justify-between items-center text-white">
                <h2 class="text-xl font-serif font-bold">Checkout</h2>
                <button onclick="closeCheckout()"><i data-lucide="x" class="w-6 h-6"></i></button>
            </div>

            <form onsubmit="submitOrder(event)" class="p-8">
                <!-- Table Input (Read-only) -->
                <div class="mb-8">
                    <label class="block text-xs font-bold uppercase tracking-widest text-gray-500 mb-3">Table
                        Number</label>
                    <input type="text" id="checkout-table" placeholder="E.g. 5" required readonly
                        class="w-full bg-gray-200 border-2 border-transparent rounded-xl px-4 py-3 text-lg font-bold text-brand-green outline-none cursor-not-allowed">
                </div>

                <!-- Payment Method -->
                <div class="mb-8">
                    <label class="block text-xs font-bold uppercase tracking-widest text-gray-500 mb-3">Payment
                        Method</label>
                    <div class="grid grid-cols-3 gap-3">
                        <button type="button" onclick="selectPayment('POS')" id="pay-pos"
                            class="payment-btn flex flex-col items-center justify-center p-4 rounded-xl border-2 border-gray-200 text-gray-400 hover:border-brand-gold/50 transition-all">
                            <i data-lucide="credit-card" class="mb-2 w-6 h-6"></i>
                            <span class="text-[10px] font-bold uppercase">POS</span>
                        </button>
                        <button type="button" onclick="selectPayment('CASH')" id="pay-cash"
                            class="payment-btn flex flex-col items-center justify-center p-4 rounded-xl border-2 border-gray-200 text-gray-400 hover:border-brand-gold/50 transition-all">
                            <i data-lucide="banknote" class="mb-2 w-6 h-6"></i>
                            <span class="text-[10px] font-bold uppercase">Cash</span>
                        </button>
                        <button type="button" onclick="selectPayment('TRANSFER')" id="pay-transfer"
                            class="payment-btn flex flex-col items-center justify-center p-4 rounded-xl border-2 border-gray-200 text-gray-400 hover:border-brand-gold/50 transition-all">
                            <i data-lucide="smartphone" class="mb-2 w-6 h-6"></i>
                            <span class="text-[10px] font-bold uppercase">Transfer</span>
                        </button>
                    </div>
                    <input type="hidden" id="selected-payment" required>
                </div>

                <!-- Total -->
                <div class="bg-brand-cream p-4 rounded-xl mb-8 flex justify-between items-center">
                    <span class="text-gray-600 font-medium">Total to Pay</span>
                    <span class="text-2xl font-black text-brand-green" id="checkout-total">₦0</span>
                </div>

                <button type="submit"
                    class="w-full bg-brand-gold text-brand-green py-4 rounded-xl font-black text-lg flex items-center justify-center hover:bg-brand-dark hover:text-white shadow-lg transition-all">
                    CONFIRM ORDER
                </button>
            </form>
        </div>
    </div>

    <!-- Welcome Modal (Table Number Collection) -->
    <div id="welcome-modal"
        class="fixed inset-0 z-[120] hidden flex items-center justify-center bg-brand-dark/95 backdrop-blur-md p-4">
        <div class="bg-white rounded-[2rem] max-w-lg w-full overflow-hidden shadow-2xl animate-fade-in">
            <div class="bg-gradient-to-r from-brand-green to-brand-dark p-8 text-center text-white">
                <div class="inline-flex items-center gap-2 bg-brand-gold text-brand-dark px-4 py-2 rounded-full mb-4">
                    <i data-lucide="utensils" class="w-4 h-4"></i>
                    <span class="text-xs font-black tracking-widest uppercase">Welcome</span>
                </div>
                <h2 class="text-3xl font-serif font-bold mb-2" data-config="venue.name">Iyarà Side Restaurant</h2>
                <p class="text-brand-cream text-sm">Please enter your table number to begin</p>
            </div>

            <div class="p-8">
                <div class="mb-6">
                    <label class="block text-xs font-bold uppercase tracking-widest text-gray-500 mb-3 text-center">Your
                        Table Number</label>
                    <input type="number" id="welcome-table-input" placeholder="Enter table number" min="1"
                        class="w-full bg-gray-50 border-2 border-gray-200 focus:border-brand-gold rounded-2xl px-6 py-4 text-3xl font-black text-brand-green outline-none transition-all text-center"
                        autofocus>
                </div>

                <button onclick="confirmTableNumber()" id="welcome-continue-btn" disabled
                    class="w-full bg-brand-gold text-brand-green py-5 rounded-2xl font-black text-lg flex items-center justify-center gap-2 shadow-xl transition-all disabled:opacity-40 disabled:cursor-not-allowed hover:bg-brand-dark hover:text-white disabled:hover:bg-brand-gold disabled:hover:text-brand-green">
                    CONTINUE TO MENU <i data-lucide="arrow-right" class="w-5 h-5"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- A1: Switch Table Confirmation Modal -->
    <div id="switch-table-modal"
        class="fixed inset-0 z-[130] hidden flex items-center justify-center bg-black/80 backdrop-blur-sm p-4">
        <div class="bg-white rounded-[2rem] max-w-md w-full overflow-hidden shadow-2xl animate-fade-in">
            <div class="bg-brand-green p-6 text-center text-white">
                <div class="w-16 h-16 bg-brand-gold rounded-full flex items-center justify-center mx-auto mb-4">
                    <i data-lucide="repeat" class="w-8 h-8 text-brand-dark"></i>
                </div>
                <h2 class="text-2xl font-serif font-bold">Switch table?</h2>
            </div>

            <div class="p-8 text-center">
                <p class="text-gray-600 mb-6 leading-relaxed">
                    This link is for Table <strong id="switch-new-table"
                        class="text-brand-green text-xl">-</strong>.<br />
                    You're currently on Table <strong id="switch-current-table"
                        class="text-brand-green text-xl">-</strong>.
                </p>

                <div class="flex flex-col gap-3">
                    <button
                        onclick="const modal = document.getElementById('switch-table-modal'); saveTableNumber(modal.dataset.newTable); setTableNumberUI(modal.dataset.newTable); modal.classList.add('hidden'); renderCategories(); renderMenu(); updateCartUI();"
                        id="switch-to-new-btn"
                        class="w-full bg-brand-gold text-brand-green py-4 rounded-xl font-bold text-lg hover:bg-brand-dark hover:text-white transition-all shadow-lg">
                        Switch to Table <span id="switch-new-table-btn">-</span>
                    </button>
                    <button
                        onclick="document.getElementById('switch-table-modal').classList.add('hidden'); renderCategories(); renderMenu(); updateCartUI();"
                        class="w-full bg-gray-200 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-300 transition-all">
                        Stay on Table <span id="switch-current-table-btn">-</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Confirmation Modals -->

    <!-- POS Confirmation -->
    <div id="pos-confirmation-modal" class="modal-overlay hidden">
        <div class="modal-container animate-fade-in">
            <!-- Header (Fixed) -->
            <div class="modal-header">
                <div class="flex items-center justify-center gap-3">
                    <div class="w-12 h-12 bg-brand-gold rounded-full flex items-center justify-center">
                        <i data-lucide="credit-card" class="w-6 h-6 text-brand-dark"></i>
                    </div>
                    <h2 class="text-xl font-serif font-bold">POS Payment</h2>
                </div>
                <button class="modal-close-btn" onclick="closePaymentConfirmation()" aria-label="Close">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- Body (Scrollable) -->
            <div class="modal-body">
                <!-- Order Summary -->
                <div class="bg-brand-cream rounded-xl p-5 mb-5">
                    <p class="text-xs uppercase tracking-widest text-gray-500 mb-2 text-center">Table Number</p>
                    <p class="text-3xl font-black text-brand-green mb-4 text-center" id="pos-table">-</p>

                    <div class="h-px bg-brand-gold/20 my-4"></div>

                    <p class="text-xs uppercase tracking-widest text-gray-500 mb-2 text-center">Order ID</p>
                    <p class="text-base font-bold text-brand-dark mb-4 text-center font-mono tracking-tight"
                        id="pos-order-id">-</p>

                    <div class="h-px bg-brand-gold/20 my-4"></div>

                    <p class="text-xs uppercase tracking-widest text-gray-500 mb-2 text-center">Total Amount</p>
                    <p class="text-3xl font-black text-brand-gold text-center" id="pos-total">₦0</p>
                </div>

                <!-- Success Message -->
                <div class="bg-blue-50 border-2 border-blue-200 rounded-xl p-4">
                    <div class="flex gap-3">
                        <i data-lucide="check-circle" class="w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"></i>
                        <div>
                            <p class="text-sm text-gray-700 leading-relaxed">
                                <strong class="text-brand-green">Order sent to kitchen!</strong><br />
                                A waiter will bring the POS machine to your table shortly.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer (Sticky) -->
            <div class="modal-footer">
                <button onclick="copyOrderMessage()" class="modal-btn modal-btn-secondary">
                    <i data-lucide="clipboard-copy" class="w-5 h-5"></i>
                    Copy Order Message
                </button>
                <button onclick="closePaymentConfirmation()" class="modal-btn modal-btn-primary">
                    <i data-lucide="check" class="w-5 h-5"></i>
                    Done
                </button>
            </div>
        </div>
    </div>

    <!-- Cash Confirmation -->
    <div id="cash-confirmation-modal" class="modal-overlay hidden">
        <div class="modal-container animate-fade-in">
            <!-- Header (Fixed) -->
            <div class="modal-header">
                <div class="flex items-center justify-center gap-3">
                    <div class="w-12 h-12 bg-brand-gold rounded-full flex items-center justify-center">
                        <i data-lucide="banknote" class="w-6 h-6 text-brand-dark"></i>
                    </div>
                    <h2 class="text-xl font-serif font-bold">Cash Payment</h2>
                </div>
                <button class="modal-close-btn" onclick="closePaymentConfirmation()" aria-label="Close">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- Body (Scrollable) -->
            <div class="modal-body">
                <!-- Order Summary -->
                <div class="bg-brand-cream rounded-xl p-5 mb-5">
                    <p class="text-xs uppercase tracking-widest text-gray-500 mb-2 text-center">Table Number</p>
                    <p class="text-3xl font-black text-brand-green mb-4 text-center" id="cash-table">-</p>

                    <div class="h-px bg-brand-gold/20 my-4"></div>

                    <p class="text-xs uppercase tracking-widest text-gray-500 mb-2 text-center">Order ID</p>
                    <p class="text-base font-bold text-brand-dark mb-4 text-center font-mono tracking-tight"
                        id="cash-order-id">-</p>

                    <div class="h-px bg-brand-gold/20 my-4"></div>

                    <p class="text-xs uppercase tracking-widest text-gray-500 mb-2 text-center">Total Amount</p>
                    <p class="text-3xl font-black text-brand-gold text-center" id="cash-total">₦0</p>
                </div>

                <!-- Success Message -->
                <div class="bg-green-50 border-2 border-green-200 rounded-xl p-4">
                    <div class="flex gap-3">
                        <i data-lucide="check-circle" class="w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"></i>
                        <div>
                            <p class="text-sm text-gray-700 leading-relaxed">
                                <strong class="text-brand-green">Order sent to kitchen!</strong><br />
                                A waiter will collect cash payment at your table.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer (Sticky) -->
            <div class="modal-footer">
                <button onclick="copyOrderMessage()" class="modal-btn modal-btn-secondary">
                    <i data-lucide="clipboard-copy" class="w-5 h-5"></i>
                    Copy Order Message
                </button>
                <button onclick="closePaymentConfirmation()" class="modal-btn modal-btn-primary">
                    <i data-lucide="check" class="w-5 h-5"></i>
                    Done
                </button>
            </div>
        </div>
    </div>

    <!-- Transfer Confirmation -->
    <div id="transfer-confirmation-modal" class="modal-overlay hidden">
        <div class="modal-container animate-fade-in">
            <!-- Header (Fixed) -->
            <div class="modal-header">
                <div class="flex items-center justify-center gap-3">
                    <div class="w-12 h-12 bg-brand-gold rounded-full flex items-center justify-center">
                        <i data-lucide="smartphone" class="w-6 h-6 text-brand-dark"></i>
                    </div>
                    <h2 class="text-xl font-serif font-bold">Bank Transfer</h2>
                </div>
                <button class="modal-close-btn" onclick="closePaymentConfirmation()" aria-label="Close">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- Body (Scrollable) -->
            <div class="modal-body">
                <!-- Order Summary -->
                <div class="bg-brand-cream rounded-xl p-5 mb-5">
                    <p class="text-xs uppercase tracking-widest text-gray-500 mb-2 text-center">Table Number</p>
                    <p class="text-3xl font-black text-brand-green mb-4 text-center" id="transfer-table">-</p>

                    <div class="h-px bg-brand-gold/20 my-4"></div>

                    <p class="text-xs uppercase tracking-widest text-gray-500 mb-2 text-center">Order ID</p>
                    <p class="text-base font-bold text-brand-dark mb-4 text-center font-mono tracking-tight"
                        id="transfer-order-id">-</p>

                    <div class="h-px bg-brand-gold/20 my-4"></div>

                    <p class="text-xs uppercase tracking-widest text-gray-500 mb-2 text-center">Total Amount</p>
                    <p class="text-3xl font-black text-brand-gold text-center" id="transfer-total">₦0</p>
                </div>

                <!-- Bank Details Card -->
                <div class="bg-blue-50 border-2 border-blue-200 rounded-xl p-5 mb-5">
                    <p class="text-xs font-bold uppercase tracking-widest text-gray-600 mb-4 flex items-center gap-2">
                        <i data-lucide="building" class="w-4 h-4"></i>
                        Transfer to:
                    </p>
                    <div class="space-y-3">
                        <div class="bg-white rounded-lg p-3">
                            <p class="text-xs text-gray-500 mb-1">Bank Name</p>
                            <p class="font-bold text-brand-dark text-lg" data-config="bank.bankName">Access Bank</p>
                        </div>
                        <div class="bg-white rounded-lg p-3">
                            <p class="text-xs text-gray-500 mb-1">Account Number</p>
                            <p class="font-bold text-brand-dark text-xl font-mono tracking-wider"
                                data-config="bank.accountNumber">0123456789</p>
                        </div>
                        <div class="bg-white rounded-lg p-3">
                            <p class="text-xs text-gray-500 mb-1">Account Name</p>
                            <p class="font-bold text-brand-dark text-lg" data-config="bank.accountName">Iyarà Side
                                Restaurant</p>
                        </div>
                    </div>
                </div>

                <!-- Transfer Metadata (Anti-Abuse) -->
                <div class="bg-gray-50 border border-gray-200 rounded-xl p-4 mb-4">
                    <p class="text-xs font-bold uppercase tracking-widest text-gray-500 mb-3">Proof of Payment</p>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-xs text-gray-400 mb-1">Sender Name (Required)</label>
                            <input type="text" id="transfer-sender-name" placeholder="e.g. John Doe"
                                class="w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm font-bold text-brand-dark focus:border-brand-gold outline-none">
                        </div>
                        <div>
                            <label class="block text-xs text-gray-400 mb-1">Amount Sent</label>
                            <input type="number" id="transfer-amount-sent" placeholder="e.g. 5000"
                                class="w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm font-bold text-brand-dark focus:border-brand-gold outline-none">
                        </div>
                    </div>
                </div>

                <!-- Important Note -->
                <div class="bg-amber-50 border-2 border-amber-200 rounded-xl p-4 mb-4">
                    <div class="flex gap-3">
                        <i data-lucide="alert-circle" class="w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"></i>
                        <div>
                            <p class="text-sm text-gray-700 leading-relaxed">
                                <strong class="text-brand-dark">Important:</strong> Use your
                                <strong>Order ID</strong> as the transfer reference. Your order will be prepared
                                once payment is confirmed.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Quick Copy Buttons -->
                <div class="flex gap-2 mb-3">
                    <button onclick="copyTransferDetail('account')"
                        class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg text-sm font-semibold hover:bg-gray-200 transition-all flex items-center justify-center gap-2 border border-gray-200">
                        <i data-lucide="copy" class="w-4 h-4"></i> Copy Account
                    </button>
                    <button onclick="copyTransferDetail('orderId')"
                        class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg text-sm font-semibold hover:bg-gray-200 transition-all flex items-center justify-center gap-2 border border-gray-200">
                        <i data-lucide="copy" class="w-4 h-4"></i> Copy Order ID
                    </button>
                </div>
            </div>

            <!-- Footer (Sticky) -->
            <div class="modal-footer">
                <button onclick="copyOrderMessage()" class="modal-btn modal-btn-secondary">
                    <i data-lucide="clipboard-copy" class="w-5 h-5"></i>
                    Copy Order Message
                </button>
                <button onclick="sendWhatsAppOrder(currentOrderData); closePaymentConfirmation();"
                    class="modal-btn modal-btn-whatsapp">
                    <i data-lucide="send" class="w-5 h-5"></i>
                    Send via WhatsApp
                </button>
            </div>
        </div>
    </div>

    <!-- A3: Reconfirm Table Modal (Stale Context) -->
    <div id="reconfirm-table-modal"
        class="fixed inset-0 z-[130] hidden flex items-center justify-center bg-black/80 backdrop-blur-sm p-4">
        <div class="bg-white rounded-[2rem] max-w-md w-full overflow-hidden shadow-2xl animate-fade-in">
            <div class="bg-brand-gold p-6 text-center text-brand-dark">
                <div class="w-16 h-16 bg-brand-green rounded-full flex items-center justify-center mx-auto mb-4">
                    <i data-lucide="clock" class="w-8 h-8 text-white"></i>
                </div>
                <h2 class="text-2xl font-serif font-bold">Still here?</h2>
            </div>

            <div class="p-8 text-center">
                <p class="text-gray-600 mb-6 leading-relaxed">
                    It's been a while since you last ordered.<br />
                    Are you still at <strong id="reconfirm-table-number" class="text-brand-green text-xl">-</strong>?
                </p>

                <div class="flex flex-col gap-3">
                    <button onclick="confirmStaleTable()"
                        class="w-full bg-brand-green text-white py-4 rounded-xl font-bold text-lg hover:bg-brand-dark transition-all shadow-lg">
                        Yes, Continue Ordering
                    </button>
                    <button onclick="resetStaleTable()"
                        class="w-full bg-gray-200 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-300 transition-all">
                        No, I've Moved / Left
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- A4: Toast Notification -->
    <div id="copy-toast"
        class="hidden fixed top-4 left-1/2 -translate-x-1/2 z-[150] bg-brand-green text-white px-6 py-3 rounded-xl shadow-2xl font-bold transition-all opacity-0">
        Copied ✅
    </div>

    <!-- Scripts -->
    <script src="data.js"></script>
    <script src="script.js"></script>
    <script>
        // Init Icons
        lucide.createIcons();
    </script>
</body>

</html>